<?xml version="1.0" encoding="UTF-8"?>
<!--
  User: Dzmitry
  Date: 19.06.13
  Time: 16:02
-->
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
        >

<h:head>
    <title>Jquery first page</title>
    <link type="text/css" rel="stylesheet"
          href="#{request.contextPath}/faces/javax.faces.resource/theme.css?ln=primefaces-home"/>
    <h:outputStylesheet name="css/main.css"/>
    <h:outputStylesheet name="css/ui-lightness/jquery-ui-1.8.11.custom.css"/>
    <h:outputScript name="jquery-1.5.1.min.js" library="js"/>
    <h:outputScript name="jquery-ui-1.8.11.custom.min.js" library="js"/>

    <script type="text/javascript">
        $(function () {
            $('#tabs').tabs();
        });
    </script>

    <style type="text/css">
        ul li {
            position: relative;
            cursor: pointer;
            float: left;
            list-style: none;
        }
    </style>

</h:head>


<h:body>


    <style type="text/css">
        #modelView {
            /*float: right;*/
            width: 300px;
        }

        #dataView {
            /*float: left;*/
            width: 200px;

        }

    </style>


    <div id="wrapper">

        <div id="header">
        </div>

        <div id="middle">

            <div id="container">
                <div id="content">

                    <div id="tabs">
                        <ul>
                            <li><a href="#tabs-1">Add</a></li>
                            <li><a href="#tabs-2">Get</a></li>
                            <li><a href="#tabs-3">Update</a></li>
                            <li><a href="#tabs-4">Delete</a></li>
                        </ul>

                        <div id="tabs-1">


                            <div id="dataView">
                                <h:commandButton id="buttonDataShow" value="Show data"/>
                                <h:commandButton id="buttonDataHide" value="Hide data"/>

                                <div id="data">

                                </div>
                            </div>



                            <h:inputTextarea id="inputJson"
                                             rows="5"
                                             cols="20">

                            </h:inputTextarea>

                            <div id="SaveView">
                                <h:commandButton id="saveData" value="Save"/>
                            </div>

                            <div id="modelView">
                                <h:commandButton id="buttonModelShow" value="Show model"/>

                                <h:commandButton id="buttonModelHide" value="Hide model"/>

                                <div id="model">

                                </div>

                            </div>

                        </div>
                        <div id="tabs-2"><br/>Phasellus mattis tincidunt nibh.</div>
                        <div id="tabs-3"><br/>Nam dui erat, auctor a, dignissim quis.</div>
                        <div id="tabs-4"><br/><br/></div>
                    </div>

                </div>
            </div>

            <div class="sidebar" id="sideLeft">
                <strong>Sidebar</strong>
            </div>

        </div>

    </div>
    <script type="text/javascript">

        $('#buttonModelShow').click(function () {
            $.getJSON('model.json', {}, function (json) {
                $('#model').html('');
                $('#model').append('model: ' + json.car.model + '&lt;br/&gt;').
                        append('color: ' + json.car.color + '&lt;br/&gt;').
                        append('cost: ' + json.car.cost);
            });
            $('#model').fadeIn();
            return false;
        });

        $('#buttonModelHide').click(function () {
            $('#model').fadeOut();
            return false;
        });

        $('#buttonDataShow').click(function () {
            $.getJSON('data.json', function (data) {
                var items = [];
                $.each(data, function (key, val) {
                    $.each(val, function (key1, val1) {
                        items.push(key1 + ": " + val1 + '&lt;br/&gt;');
                    });
                });
                $('#data').html('');
                $('#data').append(items.join(' '));
            });
            $('#data').fadeIn();
        });

        $('#buttonDataHide').click(function () {
            $('#data').fadeOut();
            return false;
        });

        $('#saveData').click(
                function () {
                    #{main.writeJson()}
                }
        );

        function SaveToDisk(blobURL, fileName) {
            var reader = new FileReader();
            reader.readAsDataURL(blobURL);
            reader.onload = function (event) {
                var save = document.createElement('a');
                save.href = event.target.result;
                save.target = '_blank';
                save.download = fileName || 'unknown file';

                var event = document.createEvent('Event');
                event.initEvent('click', true, true);
                save.dispatchEvent(event);
                (window.URL || window.webkitURL).revokeObjectURL(save.href);
            };
        }

        $json = file_get_conten("people.json");

        //        var obj = jQuery.parseJSON('{"name":"John"}');
        //        alert( obj.name === "John" );


    </script>

    <div id="footer">
    </div>
</h:body>

</html>